package com.felulo.easyhelpop;

import org.bukkit.plugin.java.*;
import org.bukkit.event.*;
import org.bukkit.plugin.*;
import org.bukkit.command.*;
import org.bukkit.*;
import org.bukkit.entity.*;
import java.util.*;

public class Main extends JavaPlugin implements Listener
{
    public void onEnable() {
        this.getServer().getPluginManager().registerEvents((Listener)this, (Plugin)this);
        this.getLogger().info("easyHelpOP 1.0 has been enabled.");
    }
    
    public boolean onCommand(final CommandSender sender, final Command cmd, final String label, final String[] args) {
        if (cmd.getName().equalsIgnoreCase("helpop")) {
            if (sender.hasPermission("easyhelpop.use") || sender.hasPermission("easyhelpop.admin") || sender.isOp()) {
                if (args.length >= 1) {
                    sender.sendMessage("§a[§7easyHelpOP§a] §2Zg\u0142oszenie zosta\u0142o wys\u0142ane.");
                    sender.sendMessage("§a[§7easyHelpOP§a] §2Administracja si\u0119 z tob\u0105 skontaktuje jak tylko b\u0119dzie to mo\u017cliwe.");
                    for (final Player player : Bukkit.getServer().getOnlinePlayers()) {
                        if (player.isOp() || player.hasPermission("easyhelpop.admin")) {
                            final StringBuilder builder = new StringBuilder();
                            for (final String str : args) {
                                builder.append(" ").append(str);
                            }
                            player.sendMessage("§a[§7easyHelpOP§a] §6" + sender.getName().toString() + " §e>>§2" + builder.toString());
                        }
                    }
                }
                else {
                    sender.sendMessage("§a[§7easyHelpOP§a] §cMusisz poda\u0107 tre\u015b\u0107 zg\u0142oszenia!");
                }
            }
            else {
                sender.sendMessage("§a[§7easyHelpOP§a] §cNie masz uprawnie\u0144 do u\u017cywania tej komendy!");
            }
        }
        return false;
    }
}
